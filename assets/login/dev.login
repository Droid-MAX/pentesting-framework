#!/bin/bash

if [[ ! $__return__ == 105 ]]
then
dev.conf()
{
  (cat ${CWD}/login.conf > $TMPDIR/.cache.psf) &> /dev/null
  OTLOGIN=$(cat $TMPDIR/.cache.psf | jq .credential.token -M -r)
 if [[ ${#OTLOGIN} -lt 1 ]]
 then
echo "Make sure you're ${C2}login${R0} with psf account to use this feature."
exit 1
else
  if [[ ! -f $CWD/assets/login/login.sha256sum ]]
  then
  sha256sum ${CWD}/login.conf > ${CWD}/assets/login/login.sha256sum
  fi
  cd ${CWD}
  sha256sum -c ${CWD}/assets/login/login.sha256sum &> /dev/null
  if [[ $? -gt 0 ]]
  then
    echo -e "Login configuration file changed login again."
    rm ${CWD}/assets/login/login.sha256sum &> /dev/null
    rm ${CWD}/login.conf &> /dev/null
    login.conf
    exit 1
  fi
 fi
 }
else
  dev.conf()
  {
    :
  }
fi
